brotli:
  generator: github-1
  packages:
    - brotli:
        version: 1.1.0
        github:
          user: google
          query: releases

# brotlipy uses a tarball generated by the brotli ebuild to create its bindings, which
# it sources from /usr/share/brotli/bindings.
#
# brotlipy performs its own compilation to create a bundled library which it uses for
# the bindings. This library is specific to the particular python implementation.

brotlipy:
  generator: pypi-compat-1
  packages:
    - brotlipy:
        version: 1.1.0
        cat: dev-python
        depend: 'app-arch/brotli'
        rdepend: '${DEPEND}'
        pypi_name: brotli
        body: |
          src_unpack() {
            unpack ${ROOT}/usr/share/brotli/bindings/brotli-python-${PV}.tar.gz || die
          }
        extensions:
          - local-only
 
